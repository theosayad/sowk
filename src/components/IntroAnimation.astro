<script type="module">
  document.addEventListener('DOMContentLoaded', () => {
    const intro     = document.getElementById('intro');
    const headerImg = document.getElementById('headerImg');
    const smImg     = document.getElementById('smImg');

    if (sessionStorage.getItem('introPlayed')) {
      intro.remove();
      return;
    }
    sessionStorage.setItem('introPlayed', 'true');

    // 1️⃣ Initial settings
    const staticDuration = 1200;     // 1.2s of static header
    const driveInTime     = 2000;    // truck takes 2s to drive in
    const fallFrameTime   = 800;     // time between header frames
    const dropFrameTime   = 800;

    // 2️⃣ Show truck driving in after initial pause
    setTimeout(() => {
      smImg.classList.add('drive-in');
    }, staticDuration); // 1.2s

    // 3️⃣ After truck has fully parked (1.2 + 2s = 3.2s), start header falling
    const fallStart = staticDuration + driveInTime;

    setTimeout(() => headerImg.src = '/images/header%20text%20falling1.png', fallStart); // 3.2s
    setTimeout(() => headerImg.src = '/images/header%20text%20falling2.png', fallStart + fallFrameTime); // 4.0s

    // 4️⃣ At 4.8s, update both header and truck image to start dropping worries
    setTimeout(() => {
      headerImg.src = '/images/header%20text%20worries%20fell.png';
      smImg.src     = '/images/worries%20falling%20into%20truck.png';
    }, fallStart + 2 * fallFrameTime); // 4.8s

    // 5️⃣ Continue truck worry animation
    setTimeout(() => {
      smImg.src = '/images/worries%20falling%20into%20truck-2.png';
    }, fallStart + 3 * fallFrameTime); // 5.6s

    setTimeout(() => {
      smImg.src = '/images/truck%20with%20worries.png';
    }, fallStart + 4 * fallFrameTime); // 6.4s

    // 6️⃣ Drive out truck after all worries drop (add +1s pause)
    setTimeout(() => {
      smImg.classList.add('drive-out');
    }, fallStart + 4 * fallFrameTime + 1000); // 7.4s

    // 7️⃣ Fade out 2s after drive-out
    setTimeout(() => {
      intro.classList.add('fade-out');
      setTimeout(() => intro.remove(), 1000);
    }, fallStart + 4 * fallFrameTime + 1000 + 2000); // 9.4s + 1s fade

  });
</script>
