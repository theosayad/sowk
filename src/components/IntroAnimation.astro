---
/* Intro runs once per session. No imports needed. */
---

<div id="intro-overlay">
  <!-- Text lines -->
  <div class="lines">
    <p class="line1">Hi there!</p>
    <p class="line2">
      From here onwards, please drop off all your&nbsp;
      <span class="drop word1">worries</span>&nbsp;and&nbsp;
      <span class="drop word2">stresses</span>.
    </p>
  </div>

  <!-- Kid-style sketch truck -->
  <svg id="truck" viewBox="0 0 200 100" width="200" height="100">
    <path class="body" d="M10 60 q10 -30 40 -20 h60 q15 0 20 15 l5 15 h-145 z"/>
    <path class="cab"  d="M105 45 q5 -15 25 -10 v25 h-25z"/>
    <circle class="wheel" cx="45" cy="80" r="12"/>
    <circle class="wheel" cx="130" cy="80" r="12"/>
  </svg>
</div>

<style>
  /* Overlay fills screen */
  #intro-overlay {
    position: fixed; inset: 0; background: #fff;
    display: grid; place-items: center; text-align: center;
    font-family: "Poppins", sans-serif; overflow: hidden;
    z-index: 9999;
  }

  /* TYPEWRITER */
  .lines p {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid #000;
    font-size: clamp(1.6rem, 2.5vw, 2.2rem);
    max-width: 0;
    display: inline-block;
  }
  @keyframes type {
    to { max-width: 100%; }
  }
  @keyframes blink {
    50% { border-color: transparent; }
  }
  .line1 {
    animation: type 1s steps(12) 0.3s forwards,
               blink 0.8s step-end infinite 0.3s;
  }
  .line2 {
    animation: type 3s steps(50) 1.4s forwards,
               blink 0.8s step-end infinite 1.4s;
  }
  /* once typed, keep visible */
  .line1[style], .line2[style] { border-right-color: transparent; }

  /* DROP WORDS */
  .drop {
    display: inline-block;
    transform-origin: top left;
  }
  @keyframes dropAnim {
    0%   { transform: translateY(0)    rotate(0);   opacity:1; }
    70%  { transform: translateY(180px) rotate(-15deg); }
    100% { transform: translate(-80px,190px) rotate(-15deg); opacity:0; }
  }
  .word1 { animation: dropAnim 1.2s ease 5.4s forwards; }
  .word2 { animation: dropAnim 1.2s ease 5.8s forwards; }

  /* SKETCH TRUCK */
  #truck {
    position: absolute; bottom: 30px; left: -220px;
    stroke: #1b2a41; fill: none; stroke-width: 2;
    animation:
      driveIn 2s 4.8s forwards,
      tip     1s 7.0s forwards,
      driveOut 1.5s 8.5s forwards;
  }
  .body { stroke-linecap: round; stroke-linejoin: round; }
  .cab  { stroke-linecap: round; stroke-linejoin: round; }
  .wheel { fill: none; stroke: #1b2a41; stroke-width: 2; }

  @keyframes driveIn {
    to { left: 50%; transform: translateX(-50%); }
  }
  @keyframes tip {
    to { transform: translateX(-50%) rotate(-20deg); }
  }
  @keyframes driveOut {
    from { left:50%; transform: translateX(-50%) rotate(0); }
    to   { left:120%; transform: translateX(0) rotate(0); }
  }

  /* FADE OVERLAY */
  @keyframes fadeOut { to { opacity:0; visibility:hidden; } }
  #intro-overlay.fade {
    animation: fadeOut 0.8s ease 9.8s forwards;
  }
</style>

<script is:inline>
  /* Only play once per session */
  if (typeof window !== "undefined") {
    const key = "sowkIntroPlayed";
    const root = document.getElementById("intro-overlay");
    if (sessionStorage.getItem(key)) {
      root.remove();
    } else {
      setTimeout(() => root.classList.add("fadeOut"), 9800);
      setTimeout(() => root.remove(), 10600);
      sessionStorage.setItem(key, "1");
    }
  }
</script>
