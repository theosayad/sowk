---
import Layout from '../layouts/Default.astro';
import activities from '../data/activities.json' assert { type: 'json' };

// unique category list – keeps render order stable
const categories = [...new Set(activities.map(a => a.category))];
---

<Layout title="Experience · SOWK">
  <section class="experience-hero">
    <h1>Things to do in & around Smar Jbeil</h1>
  </section>

  {categories.map(cat => (
    <>
      <h2 class="experience-category">{cat}</h2>

      <div class="experience-grid">
        {activities
          .filter(a => a.category === cat)
          .map(a => (
            <article class="experience-card">
              <h3>{a.name}</h3>
              <p class="experience-meta">
                {a.location} · {a.distance.toFixed(1)} km
              </p>

              <p class="experience-desc">{a.description}</p>

              <a
                href={a.link}
                target="_blank"
                rel="noopener"
                class="experience-link"
                title={a.copy}             /* ← your new long copy appears on hover / long-press */
              >
                More info ↗
              </a>
            </article>
        ))}
      </div>
    </>
  ))}
</Layout>

<style>
/* ---------- layout ---------- */
.experience-hero      { text-align:center; margin:4rem 0 2rem; }
.experience-category  { font-size:1.75rem; margin:3.5rem 0 1.5rem;
                        color:#294534; font-weight:600; }
.experience-grid      { display:grid; gap:2rem;
                        grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); }

/* ---------- card ---------- */
.experience-card      { background:#fff; border-radius:1rem; padding:2rem;
                        box-shadow:0 18px 48px rgba(0,0,0,.05);
                        display:flex; flex-direction:column; gap:1rem; }
.experience-card h3   { font-size:1.25rem; font-weight:600; }
.experience-meta      { font-size:.9rem; color:#778; }
.experience-desc      { font-size:.95rem; line-height:1.6; }
.experience-link      { margin-top:auto; font-weight:600; color:#c89a2a;
                        text-decoration:none; }
.experience-link:hover{ text-decoration:underline; }

/* ---------- typography (Poppins everywhere) ---------- */
body, h1, h2, h3, p, a, li { font-family:'Poppins', sans-serif; }
</style>
