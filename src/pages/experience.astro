---
import Layout from '../layouts/Default.astro';
import activities from '../data/activities.json' assert { type: 'json' };

/* remove empty / undefined categories */
const categories = [
  ...new Set(activities.map(a => a.category).filter(Boolean))
];
---

<Layout title="Experience · SOWK">
  <section class="experience-hero">
    <h1>Things to do in &amp; around Smar Jbeil</h1>
  </section>

  {categories.map(cat => (
    <>
      <h2 class="experience-category">{cat}</h2>

      <div class="experience-grid">
        {activities
          .filter(a => a.category === cat)
          .map(a => (
            <article class="experience-card">
              <img
                src={a.image}
                alt={a.name}
                class="experience-thumb"
                loading="lazy"
                width="400"
                height="260"
              />

              <div class="experience-body">
                <h3>{a.name}</h3>
                <p class="experience-meta">
                  {a.location} · {a.distance.toFixed(1)} km
                </p>
                <p class="experience-desc">{a.description}</p>

                <a
                  href={`/experience/${a.slug}`}
                  class="experience-link"
                >
                  More info ↗
                </a>
              </div>
            </article>
        ))}
      </div>
    </>
  ))}
</Layout>

<style>
/* ========== typography – force Poppins everywhere ========== */
body, h1, h2, h3, p, a { font-family:'Poppins', sans-serif; }

/* ---------- hero ---------- */
.experience-hero      { text-align:center; margin:4rem 0 2rem; }
.experience-hero h1   { font-size:2.4rem; font-weight:700; }

/* ---------- category heading ---------- */
.experience-category  { font-size:1.75rem; margin:3.5rem 0 1.5rem;
                        color:#294534; font-weight:600; }

/* ---------- responsive grid ---------- */
.experience-grid      { display:grid; gap:2rem;
                        grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); }

/* ---------- card ---------- */
.experience-card      { background:#fff; border-radius:1rem; overflow:hidden;
                        box-shadow:0 18px 48px rgba(0,0,0,.05);
                        display:flex; flex-direction:column; }
.experience-thumb     { width:100%; height:200px; object-fit:cover; }

.experience-body      { padding:1.5rem; display:flex; flex-direction:column; gap:0.75rem; }
.experience-body h3   { font-size:1.25rem; font-weight:600; }

.experience-meta      { font-size:.9rem; color:#667; }
.experience-desc      { font-size:.95rem; line-height:1.6; }

.experience-link      { margin-top:auto; font-weight:600; color:#c89a2a;
                        text-decoration:none; }
.experience-link:hover{ text-decoration:underline; }
</style>
